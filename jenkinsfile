
pipeline {


  agent any
  tools {
      
      gradle 'Gradle-5.0'
   }

  options {
    disableConcurrentBuilds()
    buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '5'))
  }

 stages {
    stage('SCM Checkout') {
      steps {
        script {
            git credentialsId: '62fad565-6f44-4f5f-a7c1-62297b0c73bb', url: 'https://github.com/gudihimabindu/javaapp.git'
            
         }
      }   
     }
   stage('Build') {
      steps {
          sh 'java -version'
          
      }
    }
    stage ('Gradle Static Analysis'){
      steps{
        script {
          echo 'this is sonar'
         } 
          withSonarQubeEnv('sonarqube') {
           sh "gradle sonarqube -Dsonar.login=4e321248410c358bdd2e6bae88f27ee7f64fdfee  -Dsonar.host.url=http://ec2-3-129-209-49.us-east-2.compute.amazonaws.com:9000/"
         }
      }
    }  
  }  
}
